---
title: WSL2 安装 PostgreSQL
date: '2025-09-20'
tags: ['linux', 'database']
draft: false
summary: WSL2 install PostgreSQL
---

## 🔹 1. 更新系统

```bash
sudo apt update && sudo apt upgrade -y
```

---

## 🔹 2. 安装 PostgreSQL

```bash
sudo apt install postgresql postgresql-contrib -y
```

- **postgresql** → 核心数据库服务
- **postgresql-contrib** → 一些额外的扩展（如 `uuid-ossp`）

---

## 🔹 3. 启动 & 管理 PostgreSQL 服务

在 WSL2 中需要手动启动服务：

```bash
sudo service postgresql start
```

查看服务状态：

```bash
sudo service postgresql status
```

---

## 🔹 4. 切换到 postgres 用户

PostgreSQL 默认有一个超级用户 **postgres**：

```bash
sudo -i -u postgres
```

进入数据库命令行：

```bash
psql
```

---

## 🔹 5. 创建用户和数据库（可选）

在 `psql` 中运行：

```sql
-- 创建一个用户
CREATE USER myuser WITH PASSWORD 'mypassword';

-- 创建一个数据库，并指定所有者
CREATE DATABASE mydb OWNER myuser;

-- 赋予权限
GRANT ALL PRIVILEGES ON DATABASE mydb TO myuser;
```

退出 `psql`：

```sql
\q
```

---

## 🔹 6. 开放远程访问（可选）

### 编辑配置文件

```bash
sudo nano /etc/postgresql/14/main/postgresql.conf
```

找到并修改：

```conf
listen_addresses = '*'
```

### 修改访问控制

```bash
sudo nano /etc/postgresql/14/main/pg_hba.conf
```

添加一行：

```conf
host    all             all             0.0.0.0/0               md5
```

### 重启服务

```bash
sudo service postgresql restart
```

---

✅ 至此，你已经在 **WSL2 (Ubuntu)** 上成功安装并配置了 **PostgreSQL**。
